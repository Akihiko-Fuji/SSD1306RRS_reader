# SSD1309/SSD1306 日本語RSSリーダー

Raspberry PiとSSD1309/SSD1306 OLEDディスプレイ用の、日本語表示対応RSSニュースリーダーです。ボタン操作による記事・フィード切り替えや自動スクロール表示にも対応します。

---

## 📌 主な機能

- 複数のRSSフィードを自動取得・定期更新
- 日本語ニュースのタイトル＆本文表示（日本語フォント利用可能）
- 記事本文の自動横スクロール表示
- GPIOボタンによる「記事送り」「RSSフィード切替」
- シンプルで見やすいOLED画面デザイン
- 切り替わりがわかりやすいローディング処理付き
- 開始時間、終了時間を設定するタイマー機能付き

---

## 🖼 スクリーンショット
![demo](https://github.com/Akihiko-Fuji/SSD1306RRS_reader/blob/main/demo.gif?raw=true)

---
## 💻 動作環境

- **Raspberry Pi** (Zero, 3, 4など)
- **SSD1309またはSSD1306 OLED** (I2C接続 または SPI接続, 推奨解像度: 128x64)
- **Python 3以降**
- **12ptサイズの日本語ビットマップフォント**
- 必要ライブラリ:
    - `luma.oled`
    - `feedparser`
    - `pillow`
    - `RPi.GPIO`

---

## ⚡ インストール

1. 必要なライブラリのインストール
    ```sh
    pip3 install luma.oled feedparser pillow RPi.GPIO
    ```

2. プログラムのダウンロード
    ```sh
    git clone https://github.com/Akihiko-Fuji/SSD1306RRS_reader.git
    cd SSD1306RRS_reader
    ```

3. 日本語フォントファイル（例: <a href="https://fontmeme.com/jfont/jf-dot-font/">JF-Dot-MPlusH12.ttf</a>など）をプログラムと同じディレクトリにコピー  
   ※他の.ttfファイルも指定可能です。ビットマップフォントの利用を推奨します。   

5. 必要に応じ、ソースコード内のI2Cアドレス・ピン番号・解像度などを自分の環境に合わせて編集

---

## 🚀 使い方

```sh
python3 SSD1309_RSS.py
```

- 起動後、OLEDに日本語ニュースがスクロール表示されます
- 一定時間でフィード切り替えとなりますが、物理ボタン(GPIO 18)を利用することで「記事送り／戻し」「フィード切替」が可能です

---

## 🔌 配線例(I2S接続の場合)
|Raspberry Pi	|OLED	|備考|
|---|---|---|
|3.3V |VCC	|SSD1306/1309共に5Vでも動作しますが、プルアップ抵抗を利用する場合は3.3V接続をおこなってください  |
|GND	|GND	|  |
|SDA (GPIO 2)	|SDA	|I2C通信,配線を伸ばす場合は、VCCに2.2kΩのプルアップ抵抗を介して接続してください|
|SCL (GPIO 3)	|SCL	|I2C通信,配線を伸ばす場合は、VCCに2.2kΩのプルアップ抵抗を介して接続してください|
- ボタン用GPIOピン例: GPIO18（（次記事、フィード切替）
- VCC GND間に180uF程度のキャパシタを追加すると描画時ノイズが抑制できるようです

---

## 📝 フィード・フォントのカスタマイズ
- RSS_FEEDSリスト内で表示するRSSを編集・追加できます
- 日本語フォントを差し替える場合はinitialize()関数内のパスを書き換えてください
- スクロール速度・記事表示時間も定数で調整可能です

---

## ⚠️ 既知の課題
- 一部のRSSで文字化けや説明テキストが正しく取得できないことがあります
- OLED表示やボタンの配線ミスにご注意ください

---

## 🔍 バージョンアップ履歴
ver1.5<BR>
リファクタリングをおこないました。利用上の変更はありません<BR>
- グローバル定数を必要最小限として、残りをclassに移行した<BR>
- タイマーはメインループ内の時刻管理に一元化しました<BR>
- 例外ハンドリング強化などなど<BR>

ver1.4<BR>
- gpioボタンが適切に動作していなかった問題を修正しました。gpio 18ボタンのみ利用する形とし、シングルクリックで記事送り、ダブルクリックでフィード送りという操作インターフェースに変更しました<BR>
- 操作の都合上、記事戻し機能は無くなりました<BR>
- 最近流行になっているBリーグRSSを追加しました。RSSとしては記事が長過ぎますね<BR>

ver1.3<BR>
- NHK ONEに対応しました。また、GPIOボタンだけでなく自動でRSSフィードが切り替わるようにしました<BR>
- 記事が最後まで読めるように切り替えタイミングを修正しました<BR>

ver1.2<BR>
- SPI接続に対応しました。設定ファイルはありませんので、コード内でどちらの接続をおこなうか切り替えてください<BR>

ver1.1<BR>
- 画面表示の開始終了タイマー機能追加、タイトルと時計の位置調整、アニメーション処理の変更、<BR>
- タイトル本文の区切位置の調整、ターミナルへの出力メッセージを英語に変更（文字化け対策）<BR>

ver1.0<BR>
- リリース<BR>

---

## 👤 作者
- Akihiko Fuji
- ご質問・不具合は [issues](https://github.com/Akihiko-Fuji/SSD1306RRS_reader/issues) まで
